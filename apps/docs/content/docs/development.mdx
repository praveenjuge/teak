---
title: Development Guide
description: Setup and development workflow for Teak
icon: Code
---

## Quick Start

```bash
git clone https://github.com/praveenjuge/teak.git
cd teak
bun install
bun run predev
```

**Prerequisites**: Bun 1.0+, Node.js 18+, Git

## Project Structure

```
teak/
├── apps/
│   ├── web/          # Next.js frontend
│   ├── mobile/       # Expo React Native
│   ├── extension/    # Chrome extension (Wxt)
│   └── docs/         # Documentation site
├── backend/
│   ├── convex/       # Database & functions
│   │   ├── tasks/    # Background processing
│   │   └── workflows/# AI pipeline orchestration
│   └── shared/       # Shared utilities
└── package.json
```

## Tech Stack

- **Backend**: Convex (real-time DB + serverless)
- **Web**: Next.js, React, TypeScript, TailwindCSS
- **Mobile**: Expo React Native
- **Extension**: Wxt framework
- **Auth**: Better Auth
- **UI**: shadcn/ui + Radix
- **AI**: OpenAI API
- **Screenshots**: Cloudflare Browser Rendering
- **Billing**: Polar
- **Testing**: Playwright

## Development Commands

```bash
# All services
bun run dev

# Individual services
bun run dev:backend      # Convex
bun run dev:frontend     # Next.js web
bun run dev:mobile       # Expo mobile
bun run dev:extension    # Browser extension
bun run dev:docs         # Documentation

# Build
bun run build            # Web production
bun run build:extension  # Extension build
bun run package:extension # Extension package

# Test
bun run test             # E2E tests
```

## Access Points

- **Web App**: http://localhost:3000
- **Admin**: http://localhost:3000/admin
- **Convex Dashboard**: Opens after `bun run predev`
- **Mobile**: Expo Go/simulator
- **Extension**: Chrome dev mode
- **Docs**: http://localhost:3001

## Setup

### 1. Convex & Better Auth

```bash
bun run predev  # Creates Convex deployment
npx convex env set BETTER_AUTH_SECRET=$(openssl rand -base64 32)
npx convex env set SITE_URL http://localhost:3000
```

1. `BETTER_AUTH_SECRET` signs Better Auth sessions—set it once per environment.
2. `SITE_URL` must match your Next.js origin locally and inside Convex.
3. `CONVEX_SITE_URL` is the `.site` domain Convex assigns; copy it from the dashboard after `bun run predev`.

### 2. Environment Variables

For detailed environment variable configuration, see the **[Environment Settings](./environment-settings)** document.

## Card Processing Pipeline

Cards flow through 4 AI-powered stages:

1. **Classification** - Content type detection & color extraction
2. **Categorization** - Link enrichment & provider metadata
3. **Metadata** - AI tags, summaries, transcripts
4. **Renderables** - Thumbnails & visual assets

**Key Files**:

- `backend/convex/workflows/cardProcessing.ts` - Main orchestrator
- `backend/convex/workflows/steps/` - Individual stage logic
- `backend/convex/tasks/ai/` - Background AI processing

## Extension Development

```bash
# Development
bun run dev:extension

# Build
bun run build:extension

# Chrome: Load unpacked from apps/extension/build/chrome-mv3-dev
# Firefox: bun run dev:firefox
```

## Convex Functions

Real-time queries with built-in auth:

```javascript
export const getCards = query({
  args: {},
  handler: async (ctx) => {
    const identity = await ctx.auth.getUserIdentity();
    if (!identity) return [];

    return await ctx.db
      .query("cards")
      .filter((q) => q.eq(q.field("userId"), identity.subject))
      .collect();
  },
});
```
