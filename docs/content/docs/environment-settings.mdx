---
title: Environment Settings
description: Environment variables configuration for Teak
icon: Settings
---

## Backend (`backend/.env.local`)

```bash
SITE_URL=http://localhost:3000
BETTER_AUTH_SECRET=your-secret               # Better Auth security
CLOUDFLARE_API_TOKEN=token                   # Cloudflare API access
CLOUDFLARE_BROWSER_RENDERING_ACCOUNT_ID=id   # Screenshots
ENABLE_MULTIPLE_USER_REGISTRATION=true       # Allow new users
OPENAI_API_KEY=sk_...                        # AI processing
POLAR_ACCESS_TOKEN=token                     # Billing
POLAR_ORGANIZATION_TOKEN=token               # Polar organization
POLAR_SERVER=sandbox                         # sandbox|production
POLAR_WEBHOOK_SECRET=secret                  # Polar webhooks
RESEND_API_KEY=token                         # Email service
```

## Clients

- **Web (`web/.env.local`)**

  ```bash
  CONVEX_DEPLOY_KEY=
  NEXT_PUBLIC_CONVEX_URL=https://deployment.convex.cloud
  NEXT_PUBLIC_CONVEX_SITE_URL=https://deployment.convex.site
  ```

- **Mobile (`mobile/.env.local`)**

  ```bash
  EXPO_PUBLIC_CONVEX_URL=https://deployment.convex.cloud
  EXPO_PUBLIC_CONVEX_SITE_URL=https://deployment.convex.site
  ```

- **Extension (`extension/.env.local`)**

  ```bash
  VITE_PUBLIC_CONVEX_URL=https://deployment.convex.cloud
  VITE_PUBLIC_CONVEX_SITE_URL=https://deployment.convex.site
  ```

## Getting Values

### Convex

1. Run `bun run predev` â†’ creates deployment.
2. Backend CLI uses `dev:name-123` (from `.env.local`).
3. Frontend clients hit `https://name-123.convex.cloud`.
4. Site URL for Better Auth: `https://name-123.convex.site`.

### Better Auth

1. Development base URL: `http://localhost:3000`; production: your public domain.
2. Generate a secret once: `npx convex env set BETTER_AUTH_SECRET $(openssl rand -base64 32)`.
3. Mirror the base URL in both `SITE_URL` (Next.js + Convex) and `CONVEX_SITE_URL` (Convex site endpoint) and reuse the same `CONVEX_SITE_URL` in mobile/extension env files.
4. Re-run `npx convex env set` whenever the public domain changes.

## Environment Types

| Environment | Convex Deployment     | Better Auth Site URL      |
| ----------- | --------------------- | ------------------------- |
| Development | `dev:name-123`        | `http://localhost:3000`   |
| Production  | Production deployment | `https://your-domain.com` |

## Feature Flags

| Feature           | Required Env Var                                                         | What it Enables                      |
| ----------------- | ------------------------------------------------------------------------ | ------------------------------------ |
| AI Processing     | `OPENAI_API_KEY`                                                         | Auto-tags, summaries, categorization |
| Screenshots       | `CLOUDFLARE_API_TOKEN`, `CLOUDFLARE_BROWSER_RENDERING_ACCOUNT_ID`        | Link preview thumbnails              |
| Billing           | `POLAR_ACCESS_TOKEN`, `POLAR_ORGANIZATION_TOKEN`, `POLAR_WEBHOOK_SECRET` | Subscription management              |
| User Registration | `ENABLE_MULTIPLE_USER_REGISTRATION`                                      | Allow new user signups               |
| Email Service     | `RESEND_API_KEY`                                                         | Transactional emails                 |
